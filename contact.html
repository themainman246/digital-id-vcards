<script>
  const params = new URLSearchParams(window.location.search);
  const contactSlug = params.get('contact') || 'default';
  const fileUrl = `https://themainman246.github.io/digital-id-vcards/contacts/${contactSlug}-contact.vcf`;

  const isAndroid = /Android/i.test(navigator.userAgent);
  const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);

  if (isIOS) {
    window.location.href = fileUrl;
  } else if (isAndroid) {
    const anchor = document.createElement('a');
    anchor.href = fileUrl;
    anchor.download = `${contactSlug}.vcf`;
    anchor.style.display = 'none';
    document.body.appendChild(anchor);
    anchor.click();

    document.body.innerHTML = `
      <p style="font-family: sans-serif; margin-top: 40px;">
        ðŸ“¥ Contact file downloaded.<br>
        Open your Contacts app â†’ Import from file â†’ Select <strong>${contactSlug}.vcf</strong>
      </p>
    `;
  } else {
    document.body.innerHTML = `<p>Unsupported device. <a href="${fileUrl}">Download contact file</a>.</p>`;
  }
</script>
